(function(){var e={736:function(e,t,i){var o=i(4169);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var r=i(9548).A;r("0102cb62",o,!0,{sourceMap:!1,shadowMode:!1})},2118:function(e,t,i){"use strict";i.r(t);var o=i(1601),r=i.n(o),a=i(6314),s=i.n(a),d=s()(r());d.push([e.id,".preview-tab[data-v-63075e8a]{max-width:100%;padding:0 16px}.tab-header[data-v-63075e8a]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;padding:0 8px}.tab-title[data-v-63075e8a]{font-size:20px;font-weight:600;color:#1a1a1a;margin:0}.info-badge[data-v-63075e8a]{background:#e3f2fd;color:#1976d2;padding:4px 8px;border-radius:12px;font-size:11px;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.configurator-container[data-v-63075e8a]{display:flex;flex-direction:column;gap:20px}.product-showcase[data-v-63075e8a]{background:#fff;border-radius:12px;padding:16px;box-shadow:0 2px 8px rgba(0,0,0,.1);order:1}.main-image[data-v-63075e8a]{margin-bottom:16px}.showcase-img[data-v-63075e8a]{width:100%;height:200px;-o-object-fit:cover;object-fit:cover;border-radius:8px}.placeholder-showcase[data-v-63075e8a]{width:100%;height:200px;background:#f8f9fa;border-radius:8px;color:#999}.placeholder-img[data-v-63075e8a],.placeholder-showcase[data-v-63075e8a]{display:flex;flex-direction:column;align-items:center;justify-content:center}.placeholder-icon[data-v-63075e8a]{width:32px;height:32px;margin-bottom:8px}.configuration-summary h3[data-v-63075e8a]{font-size:16px;font-weight:600;color:#1a1a1a;margin:0 0 12px}.selected-products[data-v-63075e8a]{display:flex;flex-direction:column;gap:8px;margin-bottom:16px}.selected-product[data-v-63075e8a]{display:flex;align-items:center;gap:8px;padding:8px;background:#f8f9fa;border-radius:6px;border:2px solid transparent}.product-thumb[data-v-63075e8a]{width:32px;height:32px;-o-object-fit:cover;object-fit:cover;border-radius:4px}.product-details[data-v-63075e8a]{flex:1;display:flex;flex-direction:column;gap:2px}.product-name[data-v-63075e8a]{font-size:12px;font-weight:500}.product-price[data-v-63075e8a]{font-size:12px;display:flex;gap:8px}.quantity[data-v-63075e8a]{font-size:10px;color:#666}.price-summary[data-v-63075e8a]{padding:12px;border-radius:8px;color:#fff}.total-price[data-v-63075e8a]{display:flex;justify-content:space-between;align-items:center;flex-direction:row}.price-label[data-v-63075e8a]{font-size:14px;color:#1a1a1a;font-weight:500}.price-value[data-v-63075e8a]{font-size:18px;font-weight:700}.options-configurator[data-v-63075e8a]{display:flex;flex-direction:column;gap:12px;order:2}.option-accordion[data-v-63075e8a]{background:#fff;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.08);overflow:hidden}.accordion-header[data-v-63075e8a]{display:flex;justify-content:space-between;align-items:center;padding:16px;cursor:pointer;background:#f8f9fa;border-bottom:1px solid #eee;transition:background-color .2s}.accordion-header[data-v-63075e8a]:hover{background:#f0f0f0}.accordion-title[data-v-63075e8a]{display:flex;align-items:center;gap:12px;flex:1}.option-title[data-v-63075e8a]{font-size:16px;font-weight:600;color:#1a1a1a;margin:0}.required-badge[data-v-63075e8a]{background:#ffebee;color:#d32f2f;padding:2px 6px;border-radius:8px;font-size:10px;font-weight:500}.accordion-icon[data-v-63075e8a]{width:20px;height:20px;color:#666;transition:transform .3s}.accordion-icon.rotated[data-v-63075e8a]{transform:rotate(180deg)}.accordion-content[data-v-63075e8a]{padding:16px}.products-list[data-v-63075e8a]{display:flex;flex-direction:column;gap:12px}.product-item[data-v-63075e8a]{display:flex;align-items:flex-start;gap:12px;padding:12px;background:#f8f9fa;border:2px solid transparent;border-radius:8px;cursor:pointer;transition:all .3s}.product-item[data-v-63075e8a]:hover{background:#fff;border-color:#e0e0e0;box-shadow:0 2px 8px rgba(0,0,0,.1)}.product-item.selected[data-v-63075e8a]{background:#fff;border-color:#1976d2;box-shadow:0 2px 12px rgba(25,118,210,.2)}.product-item.disabled[data-v-63075e8a]{opacity:.5;cursor:not-allowed;background:#f0f0f0}.product-item.excluded[data-v-63075e8a],.selected-product.excluded[data-v-63075e8a]{border-color:#d32f2f;background:#ffebee}.product-item.required[data-v-63075e8a],.selected-product.required[data-v-63075e8a]{border-color:#ff9800;background:#fff3e0}.none-option[data-v-63075e8a]{border:2px dashed #ddd;justify-content:center;text-align:center}.none-option.selected[data-v-63075e8a]{border-color:#1976d2;background:#e3f2fd}.product-image[data-v-63075e8a]{position:relative;width:80px;height:80px;flex-shrink:0}.product-img[data-v-63075e8a]{width:100%;height:100%;-o-object-fit:cover;object-fit:cover;border-radius:6px}.none-icon[data-v-63075e8a]{width:32px;height:32px;color:#999;margin:24px auto}.product-badges[data-v-63075e8a]{position:absolute;top:4px;right:4px;display:flex;flex-direction:column;gap:2px}.badge[data-v-63075e8a]{padding:2px 4px;border-radius:8px;font-size:8px;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.badge.required[data-v-63075e8a]{background:#ffebee;color:#d32f2f;z-index:9999}.badge.price-up[data-v-63075e8a]{background:#e8f5e8;color:#2e7d32}.badge.price-down[data-v-63075e8a]{background:#fff3e0;color:#f57c00}.selection-overlay[data-v-63075e8a]{position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(25,118,210,.9);border-radius:6px;display:flex;align-items:center;justify-content:center}.check-icon[data-v-63075e8a]{width:24px;height:24px;color:#fff}.disabled-overlay[data-v-63075e8a]{position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.7);border-radius:6px;display:flex;align-items:center;justify-content:center}.disabled-icon[data-v-63075e8a]{width:24px;height:24px;color:#fff}.product-info[data-v-63075e8a]{flex:1;min-width:0}.product-name[data-v-63075e8a]{font-size:14px;font-weight:600;color:#1a1a1a;margin:0 0 4px;line-height:1.3}.rule-messages[data-v-63075e8a]{margin:4px 0 8px;display:flex;flex-direction:column;gap:4px}.rule-message[data-v-63075e8a]{display:flex;align-items:center;gap:4px;padding:4px 6px;border-radius:4px;font-size:11px;line-height:1.2}.rule-message.error[data-v-63075e8a]{background:#ffebee;color:#d32f2f}.rule-message.warning[data-v-63075e8a]{background:#fff3e0;color:#f57c00}.rule-message.info[data-v-63075e8a]{background:#e3f2fd;color:#1976d2}.message-icon[data-v-63075e8a]{width:12px;height:12px;flex-shrink:0}.message-text[data-v-63075e8a]{font-weight:500}.product-mobile[data-v-63075e8a]{font-size:11px;color:#666;margin:0 0 4px}.product-price[data-v-63075e8a]{font-size:14px;font-weight:600;margin-bottom:8px}.price-variation[data-v-63075e8a]{font-size:11px;color:#666;font-weight:400}.quantity-controls[data-v-63075e8a]{gap:6px}.qty-btn[data-v-63075e8a],.quantity-controls[data-v-63075e8a]{display:flex;align-items:center}.qty-btn[data-v-63075e8a]{width:24px;height:24px;border:1px solid #ddd;border-radius:4px;background:#fff;cursor:pointer;justify-content:center;transition:all .2s}.qty-btn[data-v-63075e8a]:hover:not(:disabled){border-color:#1976d2;background:#f3f9ff}.qty-btn[data-v-63075e8a]:disabled{opacity:.5;cursor:not-allowed}.icon-tiny[data-v-63075e8a]{width:12px;height:12px}.qty-display[data-v-63075e8a]{min-width:20px;text-align:center;font-weight:600;color:#1a1a1a;font-size:14px}.global-messages[data-v-63075e8a]{position:fixed;bottom:20px;left:16px;right:16px;display:flex;flex-direction:column;gap:8px;z-index:1000}.global-message[data-v-63075e8a]{display:flex;align-items:center;gap:8px;padding:12px 16px;border-radius:8px;font-size:13px;box-shadow:0 4px 12px rgba(0,0,0,.15);animation:slideUp-63075e8a .3s ease-out}.global-message.error[data-v-63075e8a]{background:#ffebee;color:#d32f2f;border-left:4px solid #d32f2f}.global-message.warning[data-v-63075e8a]{background:#fff3e0;color:#f57c00;border-left:4px solid #f57c00}.global-message.success[data-v-63075e8a]{background:#e8f5e8;color:#2e7d32;border-left:4px solid #2e7d32}@keyframes slideUp-63075e8a{0%{transform:translateY(100%);opacity:0}to{transform:translateY(0);opacity:1}}@media (min-width:768px){.preview-tab[data-v-63075e8a]{max-width:1200px;padding:0 24px}.configurator-container[data-v-63075e8a]{display:grid;grid-template-columns:350px 1fr;gap:32px;align-items:start}.product-showcase[data-v-63075e8a]{position:sticky;top:24px;order:0}.main-image[data-v-63075e8a]{margin-bottom:20px}.placeholder-showcase[data-v-63075e8a],.showcase-img[data-v-63075e8a]{height:420px}.global-messages[data-v-63075e8a]{top:24px;right:24px;left:auto;bottom:auto;max-width:400px}.global-message[data-v-63075e8a]{animation:slideIn-63075e8a .3s ease-out}@keyframes slideIn-63075e8a{0%{transform:translateX(100%);opacity:0}to{transform:translateX(0);opacity:1}}}.product-header[data-v-63075e8a]{display:flex;align-items:center}",""]),t["default"]=d},2455:function(e,t,i){"use strict";i.r(t);var o=i(1601),r=i.n(o),a=i(6314),s=i.n(a),d=s()(r());d.push([e.id,".app[data-v-a5db3b38]{display:flex;min-height:100vh;background:#f5f5f5}.app-sidebar[data-v-a5db3b38]{width:280px;background:#fff;border-right:1px solid #e0e0e0;box-shadow:2px 0 8px rgba(0,0,0,.1);top:0;left:0;height:100vh;overflow-y:auto;z-index:100}.sidebar-header[data-v-a5db3b38]{padding:24px;border-bottom:1px solid #e0e0e0}.logo[data-v-a5db3b38]{display:flex;align-items:center;gap:12px}.logo-icon[data-v-a5db3b38]{width:32px;height:32px;color:#1976d2}.logo-text[data-v-a5db3b38]{font-size:20px;font-weight:700;color:#1a1a1a}.sidebar-nav[data-v-a5db3b38]{padding:16px 0}.nav-item[data-v-a5db3b38]{display:flex;align-items:center;gap:12px;padding:12px 24px;color:#666;text-decoration:none;transition:all .2s;border-right:3px solid transparent}.nav-item[data-v-a5db3b38]:hover{background:#f8f9fa;color:#1976d2}.nav-item.active[data-v-a5db3b38]{background:#e3f2fd;color:#1976d2;border-right-color:#1976d2}.nav-icon[data-v-a5db3b38]{width:20px;height:20px}.nav-badge[data-v-a5db3b38]{background:#e0e0e0;color:#666;font-size:12px;padding:2px 6px;border-radius:10px;min-width:18px;text-align:center;margin-left:auto}.nav-item.active .nav-badge[data-v-a5db3b38]{background:#1976d2;color:#fff}.nav-divider[data-v-a5db3b38]{height:1px;background:#e0e0e0;margin:16px 24px}.nav-section[data-v-a5db3b38]{padding:8px 24px}.nav-section-title[data-v-a5db3b38]{font-size:12px;font-weight:600;color:#999;text-transform:uppercase;letter-spacing:.5px}.app-main[data-v-a5db3b38]{flex:1;background:#f5f5f5}@media (max-width:1024px){.app-sidebar[data-v-a5db3b38]{width:260px}.app-main[data-v-a5db3b38]{margin-left:260px}}@media (max-width:768px){.app-sidebar[data-v-a5db3b38]{transform:translateX(-100%);transition:transform .3s}.app-main[data-v-a5db3b38]{margin-left:0}}.feedback-container[data-v-a5db3b38]{position:fixed;top:30px;right:30px;z-index:9999;min-width:220px;max-width:350px;pointer-events:none}.feedback-message[data-v-a5db3b38]{padding:14px 20px;border-radius:6px;color:#fff;font-weight:600;margin-bottom:10px;box-shadow:0 2px 8px rgba(0,0,0,.12);font-size:15px;pointer-events:all}.feedback-message.success[data-v-a5db3b38]{background:#43a047}.feedback-message.error[data-v-a5db3b38]{background:#e53935}.feedback-message.info[data-v-a5db3b38]{background:#1976d2}",""]),t["default"]=d},3142:function(e,t,i){var o=i(2455);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var r=i(9548).A;r("6e68cf4b",o,!0,{sourceMap:!1,shadowMode:!1})},4169:function(e,t,i){"use strict";i.r(t);var o=i(1601),r=i.n(o),a=i(6314),s=i.n(a),d=s()(r());d.push([e.id,".tab-header[data-v-5486e1d4]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;padding:0 8px}.tab-title[data-v-5486e1d4]{font-size:20px;font-weight:600;color:#1a1a1a;margin:0}.info-badge[data-v-5486e1d4]{background:#e3f2fd;color:#1976d2;padding:4px 8px;border-radius:12px;font-size:11px;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.configurator-container[data-v-5486e1d4]{display:flex;flex-direction:column;gap:20px}.options-configurator[data-v-5486e1d4]{display:flex;flex-direction:column;gap:12px;order:2}.option-accordion[data-v-5486e1d4]{background:#fff;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.08);overflow:hidden}.accordion-header[data-v-5486e1d4]{display:flex;justify-content:space-between;align-items:center;padding:14px;cursor:pointer;background:#f8f9fa;border-bottom:1px solid #eee;transition:background-color .2s}.accordion-header[data-v-5486e1d4]:hover{background:#f0f0f0}.accordion-title[data-v-5486e1d4]{display:flex;align-items:center;gap:12px;flex:1}.option-title[data-v-5486e1d4]{font-size:16px;font-weight:600;color:#1a1a1a;margin:0}.required-badge[data-v-5486e1d4]{background:#ffebee;color:#d32f2f;padding:2px 6px;border-radius:8px;font-size:10px;font-weight:500}.accordion-icon[data-v-5486e1d4]{width:20px;height:20px;color:#666;transition:transform .3s}.accordion-icon.rotated[data-v-5486e1d4]{transform:rotate(180deg)}.accordion-content[data-v-5486e1d4]{padding:10px}.products-list[data-v-5486e1d4]{display:flex;flex-direction:column;gap:12px}.product-item[data-v-5486e1d4]{display:flex;gap:12px;padding:5px;background:#f8f9fa;border:2px solid transparent;border-radius:8px;cursor:pointer;transition:all .3s}.product-item[data-v-5486e1d4]:hover{background:#fff;border-color:#e0e0e0;box-shadow:0 2px 8px rgba(0,0,0,.1)}.product-item.selected[data-v-5486e1d4]{background:#fff;border-color:#ed7124;box-shadow:0 2px 12px rgba(25,118,210,.2)}.product-item.disabled[data-v-5486e1d4]{opacity:.5;cursor:not-allowed;background:#f0f0f0}.product-item.excluded[data-v-5486e1d4]{border-color:#d32f2f;background:#ffebee}.product-item.required[data-v-5486e1d4]{border-color:#ff9800;background:#fff3e0}.none-option[data-v-5486e1d4]{border:2px dashed #ddd;justify-content:center;text-align:center}.none-option.selected[data-v-5486e1d4]{border-color:#1976d2;background:#e3f2fd}.product-image[data-v-5486e1d4]{position:relative;width:60px;height:60px;flex-shrink:0}.product-img[data-v-5486e1d4]{width:100%;height:100%;-o-object-fit:cover;object-fit:cover;border-radius:6px}.none-icon[data-v-5486e1d4]{width:27px;height:27px;color:#999;margin:15px auto}.product-badges[data-v-5486e1d4]{position:absolute;top:4px;right:4px;display:flex;flex-direction:column;gap:2px}.badge[data-v-5486e1d4]{padding:2px 4px;border-radius:8px;font-size:8px;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.badge.required[data-v-5486e1d4]{background:#ffebee;color:#d32f2f;z-index:99999}.badge.price-up[data-v-5486e1d4]{background:#e8f5e8;color:#2e7d32}.badge.price-down[data-v-5486e1d4]{background:#fff3e0;color:#f57c00}.selection-overlay[data-v-5486e1d4]{position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(245,124,0,.79);border-radius:6px;display:flex;align-items:center;justify-content:center}.check-icon[data-v-5486e1d4]{width:24px;height:24px;color:#fff}.disabled-overlay[data-v-5486e1d4]{position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.7);border-radius:6px;display:flex;align-items:center;justify-content:center}.disabled-icon[data-v-5486e1d4]{width:24px;height:24px;color:#fff}.product-info[data-v-5486e1d4]{flex:1;min-width:0}.product-name[data-v-5486e1d4]{font-size:13px;font-weight:600;color:#1a1a1a;margin:0 0 4px;line-height:1}.rule-messages[data-v-5486e1d4]{margin:4px 0 8px;display:flex;flex-direction:column;gap:4px}.rule-message[data-v-5486e1d4]{display:flex;align-items:center;gap:4px;padding:4px 6px;border-radius:4px;font-size:11px;line-height:1.2}.rule-message.error[data-v-5486e1d4]{background:#ffebee;color:#d32f2f}.rule-message.warning[data-v-5486e1d4]{background:#fff3e0;color:#f57c00}.rule-message.info[data-v-5486e1d4]{background:#e3f2fd;color:#1976d2}.message-icon[data-v-5486e1d4]{width:12px;height:12px;flex-shrink:0}.message-text[data-v-5486e1d4]{font-weight:500}.product-mobile[data-v-5486e1d4]{font-size:11px;color:#666;margin:0}.product-price[data-v-5486e1d4]{font-size:14px;font-weight:600}.price-variation[data-v-5486e1d4]{font-size:11px;color:#666;font-weight:400}.quantity-controls[data-v-5486e1d4]{gap:6px}.qty-btn[data-v-5486e1d4],.quantity-controls[data-v-5486e1d4]{display:flex;align-items:center}.qty-btn[data-v-5486e1d4]{width:24px;height:24px;border:1px solid #ddd;border-radius:4px;background:#fff;cursor:pointer;justify-content:center;transition:all .2s}.qty-btn[data-v-5486e1d4]:hover:not(:disabled){border-color:#1976d2;background:#f3f9ff}.qty-btn[data-v-5486e1d4]:disabled{opacity:.5;cursor:not-allowed}.icon-tiny[data-v-5486e1d4]{width:12px;height:12px}.qty-display[data-v-5486e1d4]{min-width:20px;text-align:center;font-weight:600;color:#1a1a1a;font-size:14px}.global-messages[data-v-5486e1d4]{position:fixed;bottom:20px;left:16px;right:16px;display:flex;flex-direction:column;gap:8px;z-index:1000}.global-message[data-v-5486e1d4]{display:flex;align-items:center;gap:8px;padding:12px 16px;border-radius:8px;font-size:13px;box-shadow:0 4px 12px rgba(0,0,0,.15);animation:slideUp-5486e1d4 .3s ease-out}.global-message.error[data-v-5486e1d4]{background:#ffebee;color:#d32f2f;border-left:4px solid #d32f2f}.global-message.warning[data-v-5486e1d4]{background:#fff3e0;color:#f57c00;border-left:4px solid #f57c00}.global-message.success[data-v-5486e1d4]{background:#e8f5e8;color:#2e7d32;border-left:4px solid #2e7d32}@keyframes slideUp-5486e1d4{0%{transform:translateY(100%);opacity:0}to{transform:translateY(0);opacity:1}}@media (min-width:768px){.global-messages[data-v-5486e1d4]{top:24px;right:24px;left:auto;bottom:auto;max-width:400px}.global-message[data-v-5486e1d4]{animation:slideIn-5486e1d4 .3s ease-out}@keyframes slideIn-5486e1d4{0%{transform:translateX(100%);opacity:0}to{transform:translateX(0);opacity:1}}}.product-header[data-v-5486e1d4]{display:flex;align-items:center}.product-description-copieur[data-v-5486e1d4]{color:#7a7a7a;font-size:12px;margin:0}",""]),t["default"]=d},6531:function(e,t,i){var o=i(2118);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);var r=i(9548).A;r("062da034",o,!0,{sourceMap:!1,shadowMode:!1})},9539:function(e,t,i){"use strict";var o=i(2893),r=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"prestashop-pack-configurator"},[e.currentCopieur?t("CopieurConfigurateur",{on:{"configuration-changed":e.onConfigurationChanged,"price-calculated":e.onPriceCalculated}}):t("p",[e._v("Chargement des donnÃ©es...")])],1)},a=[],s=i(5353),d=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"preview-tab"},[t("div",{staticClass:"configurator-container"},[t("div",{staticClass:"options-configurator"},e._l(e.copieur.options,function(i,o){return t("div",{key:`preview-option-${i.ordre}`,staticClass:"option-accordion",class:{"is-open":e.openAccordions[o]}},[t("div",{staticClass:"accordion-header",on:{click:function(t){return e.toggleAccordion(o)}}},[t("div",{staticClass:"accordion-title"},[t("h4",{staticClass:"option-title"},[e._v(" "+e._s(i.titre_option||i.nom_option)+" ")]),i.choix_multiple||i.affiche_aucun_produit?e._e():t("span",{staticClass:"required-badge"},[e._v(" Obligatoire ")])]),t("chevron-down-icon",{staticClass:"accordion-icon",class:{rotated:e.openAccordions[o]}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.openAccordions[o],expression:"openAccordions[index]"}],staticClass:"accordion-content"},[t("div",{staticClass:"products-list"},[i.affiche_aucun_produit?t("div",{staticClass:"product-item none-option",class:{selected:null===e.selectedConfiguration[i.id]},on:{click:function(t){return e.selectNoneOption(i.id)}}},[t("div",{staticClass:"product-image"},[t("x-circle-icon",{staticClass:"none-icon"}),null===e.selectedConfiguration[i.id]?t("div",{staticClass:"selection-overlay"},[t("check-circle-icon",{staticClass:"check-icon"})],1):e._e()],1),e._m(0,!0)]):e._e(),e._l(e.getProductsByOptionId(i.id),function(o){return t("div",{key:`preview-product-${o.id_product_copieur}`,staticClass:"product-item",class:{selected:e.checkIfProductIsSelected(i.id,o.id_product_copieur),disabled:e.checkIfProductIsDisabled(o.id_product_copieur),excluded:e.checkIfProductIsExcluded(o.id_product_copieur),required:e.checkIfProductIsRequired(o.id_product_copieur)},on:{click:function(t){return e.toggleProductSelection(i,o)}}},[t("div",{staticClass:"product-image"},[t("img",{staticClass:"product-img",attrs:{src:o.image_url||"https://images.pexels.com/photos/163064/play-stone-network-networked-interactive-163064.jpeg?auto=compress&cs=tinysrgb&w=300",alt:o.nom_produit_ordinateur}}),t("div",{staticClass:"product-badges"},[o.achat_obligatoire?t("span",{staticClass:"badge required"},[e._v("Obligatoire")]):e._e(),o.variation_price>0?t("span",{staticClass:"badge price-up"},[e._v("+"+e._s(e.formatPriceToEuro(o.variation_price)))]):e._e(),o.variation_price<0?t("span",{staticClass:"badge price-down"},[e._v(e._s(e.formatPriceToEuro(o.variation_price)))]):e._e()]),e.checkIfProductIsSelected(i.id,o.id_product_copieur)?t("div",{staticClass:"selection-overlay"},[t("check-circle-icon",{staticClass:"check-icon"})],1):e._e(),e.checkIfProductIsDisabled(o.id_product_copieur)?t("div",{staticClass:"disabled-overlay"},[t("x-circle-icon",{staticClass:"disabled-icon"})],1):e._e()]),t("div",{staticClass:"product-info"},[t("div",{staticClass:"product-header"},[t("h5",{staticClass:"product-name"},[e._v(" "+e._s(o.name)+" ")]),e.getProductRuleMessages(o.id_product_copieur).length>0?t("div",{staticClass:"rule-messages",staticStyle:{"margin-left":"16px",display:"inline-flex","align-items":"center"}},e._l(e.getProductRuleMessages(o.id_product_copieur),function(i){return t("div",{key:i.id,class:["rule-message",i.type],staticStyle:{"margin-left":"8px"}},["warning"===i.type?t("alert-triangle-icon",{staticClass:"message-icon"}):e._e(),"error"===i.type?t("x-circle-icon",{staticClass:"message-icon"}):e._e(),"info"===i.type?t("info-icon",{staticClass:"message-icon"}):e._e(),t("span",{staticClass:"message-text"},[e._v(e._s(i.text))])],1)}),0):e._e()]),t("p",{staticClass:"product-mobile"},[e._v(e._s(o.reference))]),t("div",{staticClass:"product-price text-orange-price"},[e._v(" "+e._s(e.formatPriceToEuro(o.price+o.variation_price))+" "),0!==o.variation_price?t("span",{staticClass:"price-variation"},[e._v(" ("+e._s(o.variation_price>0?"+":"")+e._s(e.formatPriceToEuro(o.variation_price))+") ")]):e._e(),o.case_choix_qte&&e.checkIfProductIsSelected(i.id,o.id_product_copieur)?t("div",{staticClass:"quantity-controls",on:{click:function(e){e.stopPropagation()}}},[t("button",{staticClass:"qty-btn",attrs:{disabled:e.selectedQuantities[o.id_product_copieur]<=o.qte_min},on:{click:function(t){return e.decreaseQuantity(o.id_product_copieur)}}},[t("minus-icon",{staticClass:"icon-tiny"})],1),t("span",{staticClass:"qty-display"},[e._v(e._s(e.selectedQuantities[o.id_product_copieur]||1))]),t("button",{staticClass:"qty-btn",attrs:{disabled:e.selectedQuantities[o.id_product_copieur]>=o.qte_max},on:{click:function(t){return e.increaseQuantity(o.id_product_copieur)}}},[t("plus-icon",{staticClass:"icon-tiny"})],1)]):e._e()])])])})],2)])])}),0)]),e.globalValidationMessages.length>0?t("div",{staticClass:"global-messages"},e._l(e.globalValidationMessages,function(i){return t("div",{key:i.id,class:["global-message",i.type]},["warning"===i.type?t("alert-triangle-icon",{staticClass:"message-icon"}):e._e(),"error"===i.type?t("x-circle-icon",{staticClass:"message-icon"}):e._e(),"success"===i.type?t("check-circle-icon",{staticClass:"message-icon"}):e._e(),t("span",[e._v(e._s(i.text))])],1)}),0):e._e()])},n=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"product-info flex flex-col justify-center"},[t("h5",{staticClass:"product-name"},[e._v("Aucun produit")]),t("p",{staticClass:"product-description-copieur"},[e._v(" Ne pas sÃ©lectionner de produit pour cette option ")])])}],c=(i(4114),i(8111),i(2489),i(116),i(7588),i(1701),i(8237),i(3579),i(6986)),u=o.Ay.extend({name:"CopieurConfigurateur",components:{XCircleIcon:c.qhh,CheckCircleIcon:c.C1y,AlertTriangleIcon:c.eqn,InfoIcon:c.mo0,PlusIcon:c.c11,MinusIcon:c.QGg,ChevronDownIcon:c.D3D},data(){return{selectedConfiguration:{},selectedQuantities:{},ruleMessages:[],openAccordions:{}}},computed:{...(0,s.aH)(["currentCopieur"]),copieur(){return this.currentCopieur?.Copieur||{options:[],produits:[],configurations:[],rules:[]}},globalValidationMessages(){const e=[];return this.copieur.rules&&this.copieur.rules.forEach(t=>{if(this.isRuleTriggered(t))if("product"===t.target_type){const i=this.copieur.produits.find(e=>e.id_product_copieur===t.target_id),o=this.getSelectedProductIds().includes(t.target_id);"exclude"===t.action_type&&o?e.push({id:`global-${t.id}`,type:"error",text:t.message||`${i?.name} est exclu par une rÃ¨gle`}):"require"!==t.action_type||o||e.push({id:`global-${t.id}`,type:"warning",text:t.message||`${i?.name} est requis par une rÃ¨gle`})}else if("option"===t.target_type){const i=this.copieur.options.find(e=>e.id===t.target_id),o=this.isOptionSelected(t.target_id);"exclude"===t.action_type&&o?e.push({id:`global-${t.id}`,type:"error",text:t.message||`L'option ${i?.nom_option} est exclue par une rÃ¨gle`}):"require"!==t.action_type||o||e.push({id:`global-${t.id}`,type:"warning",text:t.message||`L'option ${i?.nom_option} est requise par une rÃ¨gle`})}}),e}},methods:{toggleAccordion(e){o.Ay.set(this.openAccordions,e,!this.openAccordions[e])},selectNoneOption(e){const t=this.selectedConfiguration[e];Array.isArray(t)?t.forEach(e=>{o.Ay.delete(this.selectedQuantities,e)}):"number"===typeof t&&null!==t&&o.Ay.delete(this.selectedQuantities,t),this.$set(this.selectedConfiguration,e,null),this.applyExclusionRules(),this.updateImage();const i=this.getSelectedProductsWithDetails();0===i.length?this.$store.dispatch("setDefaultConfigurationFromCopieur").then(()=>{const e=this.getSelectedProductsWithDetails();this.onConfigurationChanged({produits:e})}):this.onConfigurationChanged({produits:i})},checkIfProductIsSelected(e,t){const i=this.selectedConfiguration[e];return 0===i?0===t:Array.isArray(i)?i.includes(t):i===t},getSelectedProductsDetails(){const e=this.getSelectedProductIds();return this.copieur.produits.filter(t=>e.includes(t.id_product_copieur))},getSelectedProductIds(){const e=[];return Object.values(this.selectedConfiguration).forEach(t=>{Array.isArray(t)?e.push(...t):"number"===typeof t&&null!==t&&e.push(t)}),e},getProductsByOptionId(e){return this.copieur.produits.filter(t=>t.id_copieur_option===e)},checkIfProductIsDisabled(e){if(this.copieur.rules)for(const t of this.copieur.rules)if("exclude"===t.action_type&&this.isRuleTriggered(t)){if("product"===t.target_type&&t.target_id===e)return!0;if("option"===t.target_type){const i=this.copieur.produits.find(t=>t.id_product_copieur===e);if(i&&i.id_copieur_option===t.target_id)return!0}}return!1},checkIfProductIsExcluded(e){return this.checkIfProductIsDisabled(e)},checkIfProductIsRequired(e){if(this.copieur.rules)for(const t of this.copieur.rules)if("require"===t.action_type&&this.isRuleTriggered(t)){if("product"===t.target_type&&t.target_id===e)return!0;if("option"===t.target_type){const i=this.copieur.produits.find(t=>t.id_product_copieur===e);if(i&&i.id_copieur_option===t.target_id)return!0}}return!1},isRuleTriggered(e){const t=this.getSelectedProductIds();switch(e.rule_type){case"no_product_exclusion":return"option"===e.source_type&&this.isNoProductSelectedInOptionById(e.source_id);case"option_exclusion":case"option_obligation":return this.isOptionSelected(e.source_id);case"product_exclusion":case"product_obligation":return t.includes(e.source_id);case"quantity_rule":{if(!t.includes(e.source_id))return!1;const i=this.selectedQuantities[e.source_id]||1;switch(e.condition_operator){case"=":return i===e.condition_value;case">=":return i>=e.condition_value;case"<=":return i<=e.condition_value;case">":return i>e.condition_value;case"<":return i<e.condition_value;default:return!1}}default:return!1}},isNoProductSelectedInOptionById(e){const t=this.selectedConfiguration[e];return null===t||void 0===t||!(!Array.isArray(t)||0!==t.length)},isOptionSelected(e){const t=this.copieur.options.find(t=>t.id===e);if(!t)return!1;const i=this.getProductsByOptionId(t.id);return i.some(e=>this.getSelectedProductIds().includes(e.id_product_copieur))},getProductRuleMessages(e){const t=[];return this.copieur.rules&&this.copieur.rules.forEach(i=>{if("product"===i.target_type&&i.target_id===e&&this.isRuleTriggered(i)){let e="info",o=i.message||"RÃ¨gle appliquÃ©e";"exclude"===i.action_type&&(e="error",o=i.message||"Produit exclu par une rÃ¨gle"),"require"===i.action_type&&(e="warning",o=i.message||"Produit requis par une rÃ¨gle"),t.push({id:`rule-${i.id}`,type:e,text:o})}}),t},toggleProductSelection(e,t){if(this.checkIfProductIsDisabled(t.id_product_copieur))return;const i=e.id;if(e.choix_multiple){this.selectedConfiguration[i]||o.Ay.set(this.selectedConfiguration,i,[]);const e=[...this.selectedConfiguration[i]],r=e.indexOf(t.id_product_copieur);r>-1?(e.splice(r,1),o.Ay.delete(this.selectedQuantities,t.id_product_copieur)):(e.push(t.id_product_copieur),o.Ay.set(this.selectedQuantities,t.id_product_copieur,t.qte_min||1)),o.Ay.set(this.selectedConfiguration,i,e)}else this.selectedConfiguration[i]===t.id_product_copieur?(o.Ay.set(this.selectedConfiguration,i,null),o.Ay.delete(this.selectedQuantities,t.id_product_copieur)):(o.Ay.set(this.selectedConfiguration,i,t.id_product_copieur),o.Ay.set(this.selectedQuantities,t.id_product_copieur,t.qte_min||1));this.applyExclusionRules(),this.updateImage();const r=this.getSelectedProductsWithDetails();0===r.length?this.$store.dispatch("setDefaultConfigurationFromCopieur").then(()=>{const e=this.getSelectedProductsWithDetails();this.onConfigurationChanged({produits:e})}):this.onConfigurationChanged({produits:r})},applyExclusionRules(){this.copieur.rules&&this.copieur.rules.forEach(e=>{if("exclude"===e.action_type&&this.isRuleTriggered(e))if("product"===e.target_type){const t=e.target_id;Object.keys(this.selectedConfiguration).forEach(e=>{const i=this.selectedConfiguration[e];if(Array.isArray(i)){const r=i.indexOf(t);r>-1&&(i.splice(r,1),o.Ay.set(this.selectedConfiguration,e,i))}else i===t&&o.Ay.set(this.selectedConfiguration,e,null)}),o.Ay.delete(this.selectedQuantities,t)}else if("option"===e.target_type){const t=this.getProductsByOptionId(e.target_id);t.forEach(e=>{const t=e.id_product_copieur;Object.keys(this.selectedConfiguration).forEach(e=>{const i=this.selectedConfiguration[e];if(Array.isArray(i)){const r=i.indexOf(t);r>-1&&(i.splice(r,1),o.Ay.set(this.selectedConfiguration,e,i))}else i===t&&o.Ay.set(this.selectedConfiguration,e,null)}),o.Ay.delete(this.selectedQuantities,t)})}})},decreaseQuantity(e){this.selectedQuantities[e]>1&&(this.$set(this.selectedQuantities,e,this.selectedQuantities[e]-1),this.updateTotalPrice(),this.updateImage())},increaseQuantity(e){const t=this.copieur.produits.find(t=>t.id_product_copieur===e);t&&this.selectedQuantities[e]<t.qte_max&&(this.$set(this.selectedQuantities,e,this.selectedQuantities[e]+1),this.updateTotalPrice(),this.updateImage())},updateTotalPrice(){const e=Object.entries(this.selectedQuantities).reduce((e,[t,i])=>{const o=this.copieur.produits.find(e=>e.id_product_copieur===parseInt(t));return o?e+o.price*i:e},0);this.$store.dispatch("updateTotalPrice",e)},getSelectedProductsWithDetails(){const e=this.getSelectedProductIds(),t=this.copieur.produits.filter(t=>e.includes(t.id_product_copieur));return this.$store.dispatch("updateProductWithDetails",t),t},calculateTotalPrice(){let e=0;const t=this.getSelectedProductsWithDetails();return t.forEach(t=>{console.log("product",t);const i=this.selectedQuantities[t.id_product_copieur]||1,o=(t.price||0)+(t.variation_price||0);e+=o*i}),this.copieur.remise_copieur&&this.copieur.remise_copieur.type&&this.copieur.remise_copieur.valeur&&("percentage"===this.copieur.remise_copieur.type?e*=1-this.copieur.remise_copieur.valeur/100:"fixed"===this.copieur.remise_copieur.type&&(e=Math.max(0,e-this.copieur.remise_copieur.valeur))),this.$store.dispatch("updateTotalPrice",e),e},getSelectedConfigurationUser(){const e=[],t=this.getSelectedProductIds();return t.forEach(t=>{const i=this.selectedQuantities[t]||1;e.push({id_product_copieur:t,quantity:i})}),this.getConfigurationUser(e)},getConfigurationUser(e){return e.map(e=>`${e.id_product_copieur}:${e.quantity}`).sort().join("|")},getConfiguration(e){return e.map(e=>({id:e.id_product_prestashop,id_product_attribute:e.id_product_attribute_prestashop||0,qty:e.quantity||1,name:e.name||"",price:e.price||0}))},onConfigurationChanged(e){const t=this.getConfigurationUser(e.produits||[]),i=this.getConfiguration(e.produits||[]);this.currentImageConfig(),this.$store.commit("SET_SELECTION_FINGERPRINT",t),this.$store.commit("SET_USER_SELECTION",i),this.$emit("configuration-changed",i),this.$emit("price-calculated",this.calculateTotalPrice())},updateImage(){this.$forceUpdate()},formatPriceToEuro(e){return"number"!==typeof e||isNaN(e)?"0,00 â‚¬":new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(e)},currentImageConfig(){if(!this.copieur.configurations||0===this.copieur.configurations.length)return null;const e=this.getSelectedConfigurationUser();for(const t of this.copieur.configurations){const i=this.getConfigurationUser(t.products||[]);if(i===e)return void this.$store.dispatch("updateImages",t)}return this.copieur.configurations[0]}},mounted(){o.Ay.set(this.openAccordions,0,!0),this.$store.state.currentConfiguration&&Array.isArray(this.$store.state.currentConfiguration)&&this.$store.state.currentConfiguration.length>0?(this.$store.state.currentConfiguration.forEach(e=>{const t=this.copieur.options.find(t=>this.getProductsByOptionId(t.id).some(t=>t.id_product_copieur===e.id));t&&(t.choix_multiple?(Array.isArray(this.selectedConfiguration[t.id])||o.Ay.set(this.selectedConfiguration,t.id,[]),this.selectedConfiguration[t.id].includes(e.id)||this.selectedConfiguration[t.id].push(e.id)):o.Ay.set(this.selectedConfiguration,t.id,e.id),o.Ay.set(this.selectedQuantities,e.id,e.qty||1))}),this.onConfigurationChanged({produits:this.getSelectedProductsWithDetails()}),this.currentImageConfig()):this.$store.dispatch("setDefaultConfigurationFromCopieur").then(()=>{this.$store.state.currentConfiguration&&Array.isArray(this.$store.state.currentConfiguration)&&this.$store.state.currentConfiguration.forEach(e=>{const t=this.copieur.options.find(t=>this.getProductsByOptionId(t.id).some(t=>t.id_product_prestashop===e.id));t&&(t.choix_multiple?(Array.isArray(this.selectedConfiguration[t.id])||o.Ay.set(this.selectedConfiguration,t.id,[]),this.selectedConfiguration[t.id].includes(e.id)||this.selectedConfiguration[t.id].push(e.id)):o.Ay.set(this.selectedConfiguration,t.id,e.id),o.Ay.set(this.selectedQuantities,e.id,e.qty||1))}),this.onConfigurationChanged({produits:this.getSelectedProductsWithDetails()}),this.$emit("price-calculated",this.calculateTotalPrice()),this.currentImageConfig()})}}),p=u,l=(i(736),i(1656)),f=(0,l.A)(p,d,n,!1,null,"5486e1d4",null),g=f.exports,h=o.Ay.extend({name:"App",props:["copieurId","productId"],computed:{...(0,s.aH)(["currentCopieur","currentConfiguration","loading","error"])},components:{CopieurConfigurateur:g},data(){return{totalPrice:0}},methods:{onConfigurationChanged(e){this.$store.commit("SET_USER_SELECTION",e),this.sendConfigurationToPrestaShop(e)},onPriceCalculated(e){console.log("Prix calculÃ©:",e),this.totalPrice=e,this.updatePrestaShopPrice(e)},sendConfigurationToPrestaShop(e){window.prestashop&&window.prestashop.emit&&window.prestashop.emit("packConfigurationChanged",{configuration:e,price:this.totalPrice})},updatePrestaShopPrice(e){const t=document.querySelector(".current-price-value");if(t){const i=e/1.2;t.textContent=this.formatPrice(i),t.dataset.content=i}const i=document.querySelector(".js-product-price-ttc");i&&(i.textContent=this.formatPriceTTC(e),i.dataset.content=e)},formatPrice(e){return new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(e)},formatPriceTTC(e){return new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(e)},retryLoad(){this.copieurId&&this.$store.dispatch("loadCopieur",this.copieurId,this.productId)}},mounted(){this.copieurId&&this.$store.dispatch("loadCopieur",this.copieurId,this.productId)},watch:{"$store.state.currentConfiguration":{handler(e){this.$store.commit("SYNC_WITH_PRESTASHOP_FORM",e)},deep:!0},"$store.state.currentCopieur":{handler(e){e&&this.$store.dispatch("setDefaultConfigurationFromCopieur")},immediate:!0}}}),_=h,m=(i(3142),(0,l.A)(_,r,a,!1,null,"a5db3b38",null)),x=m.exports,b=i(4335);const v={id:26,Copieur:{nom_copieur:"test Copieur 2",titre_copieur:"test Copieur 2",description:"",active:1,options:[{id:10,ordre:1,nom_option:"Copieur",titre_option:"azeazda",affiche_aucun_produit:0,choix_multiple:0,exclusion_si_affich_est_1:[],obligation_si_affich_est_1:[],id_produit_selectionne:{19:[0]}},{id:11,ordre:2,nom_option:"Consom",titre_option:"cons",affiche_aucun_produit:1,choix_multiple:0,exclusion_si_affich_est_1:[],obligation_si_affich_est_1:[],id_produit_selectionne:{17:[35],18:[36,37]}},{id:12,ordre:3,nom_option:"zaeaez",titre_option:"azeaze",affiche_aucun_produit:0,choix_multiple:0,exclusion_si_affich_est_1:[],obligation_si_affich_est_1:[],id_produit_selectionne:{18:[36]}}],produits:[{id_product_copieur:21,id_product_prestashop:19,id_product_attribute_prestashop:0,ordre:1,dans_quel_option:"Copieur",id_copieur_option:10,name:"Mug personnalisable",reference:"demo_14",variation_price:0,achat_obligatoire:0,case_choix_qte:0,qte_min:1,qte_max:1,accessoire_exclu:[],accessoire_obligatoire:[],price:16.68,image_url:"http://localhost:8080/img/p/2/4/24-home_default.jpg"},{id_product_copieur:22,id_product_prestashop:18,id_product_attribute_prestashop:36,ordre:1,dans_quel_option:"Consom",id_copieur_option:11,name:"Carnet de notes Colibri - Type de papier: LignÃ©",reference:"demo_10",variation_price:0,achat_obligatoire:0,case_choix_qte:0,qte_min:1,qte_max:1,accessoire_exclu:[],accessoire_obligatoire:[],price:15.48,image_url:"http://localhost:8080/img/p/2/5/25-home_default.jpg"},{id_product_copieur:23,id_product_prestashop:18,id_product_attribute_prestashop:37,ordre:2,dans_quel_option:"Consom",id_copieur_option:11,name:"Carnet de notes Colibri - Type de papier: Vierge",reference:"demo_10",variation_price:0,achat_obligatoire:0,case_choix_qte:0,qte_min:1,qte_max:1,accessoire_exclu:[],accessoire_obligatoire:[],price:15.48,image_url:"http://localhost:8080/img/p/2/5/25-home_default.jpg"},{id_product_copieur:24,id_product_prestashop:17,id_product_attribute_prestashop:35,ordre:3,dans_quel_option:"Consom",id_copieur_option:11,name:"Carnet de notes Ours brun - Type de papier: PointillÃ©s",reference:"demo_9",variation_price:0,achat_obligatoire:0,case_choix_qte:0,qte_min:1,qte_max:1,accessoire_exclu:[],accessoire_obligatoire:[],price:15.48,image_url:"http://localhost:8080/img/p/2/7/27-home_default.jpg"},{id_product_copieur:25,id_product_prestashop:18,id_product_attribute_prestashop:36,ordre:1,dans_quel_option:"zaeaez",id_copieur_option:12,name:"Carnet de notes Colibri - Type de papier: LignÃ©",reference:"demo_10",variation_price:0,achat_obligatoire:0,case_choix_qte:0,qte_min:1,qte_max:1,accessoire_exclu:[],accessoire_obligatoire:[],price:15.48,image_url:"http://localhost:8080/img/p/2/5/25-home_default.jpg"}],rules:[{id:2,copieur_id:26,rule_type:"product_exclusion",source_type:"product",source_id:21,target_type:"product",target_id:21,condition_type:"simple",condition_operator:"=",condition_value:0,action_type:"exclude",message:"zeae",priority:0,active:!0,created_at:"2025-11-08 13:16:18",updated_at:"2025-11-09 14:07:08"},{id:3,copieur_id:26,rule_type:"no_product_exclusion",source_type:"option",source_id:11,target_type:"product",target_id:25,condition_type:"simple",condition_operator:"=",condition_value:0,action_type:"exclude",message:"test",priority:0,active:!0,created_at:"2025-11-14 11:01:31",updated_at:"2025-11-14 10:53:22"}],configurations:[{id:69,nom:"Configuration 1",alt:"Configuration Ã  mapper",url:null,products:[{id:191,id_product_prestashop:19,id_product_copieur:21,id_product_attribute_prestashop:0,quantity:1},{id:192,id_product_prestashop:18,id_product_copieur:22,id_product_attribute_prestashop:36,quantity:1}],is_default:!0},{id:70,nom:"Configuration 3",alt:"Configuration Ã  mapper",url:null,products:[{id:193,id_product_prestashop:19,id_product_copieur:21,id_product_attribute_prestashop:0,quantity:1},{id:194,id_product_prestashop:18,id_product_copieur:23,id_product_attribute_prestashop:37,quantity:1}],is_default:!1},{id:71,nom:"Configuration 3",alt:"Configuration Ã  mapper",url:null,products:[{id:195,id_product_prestashop:19,id_product_copieur:21,id_product_attribute_prestashop:0,quantity:1},{id:196,id_product_prestashop:17,id_product_copieur:24,id_product_attribute_prestashop:35,quantity:1}],is_default:!1}],remise_copieur:{type:"",valeur:0,description:""},remise_globale:{type:"",valeur:0,description:""},prix_groupes_clients:[],product_relations:[{id:3,id_copieur:26,id_product:24}]},created_at:"2025-10-29 02:28:19",updated_at:"2025-11-09 17:23:50",rentalInfo:{rentalEnabled:!0,duration36Enabled:!0,duration60Enabled:!0,rentalConfiguration:[{id:1,priceMin:.01,priceMax:2,duration36Months:1,duration60Months:5,sortOrder:0,dateAdd:"2025-11-24 01:04:13",dateUpd:"2025-11-24 01:04:13"},{id:4,priceMin:0,priceMax:0,duration36Months:0,duration60Months:45,sortOrder:3,dateAdd:"2025-12-10 23:42:30",dateUpd:"2025-12-10 23:59:09"},{id:5,priceMin:0,priceMax:0,duration36Months:0,duration60Months:0,sortOrder:3,dateAdd:"2025-12-10 23:42:30",dateUpd:"2025-12-10 23:42:30"},{id:6,priceMin:5,priceMax:100,duration36Months:2,duration60Months:15,sortOrder:5,dateAdd:"2025-12-10 23:59:39",dateUpd:"2025-12-11 01:58:09"}]}};class y{constructor(){this.baseURL=window.JCA_COPIEURS_CONFIG?.apiBaseUrl,this.token=window.JCA_COPIEURS_CONFIG?.token||"",this.useMockData=!1,this.axios=b.A.create({timeout:15e3,headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}}),this.axios.interceptors.request.use(e=>(this.token&&(e.data=e.data||{},e.data.token=this.token),e),e=>Promise.reject(e)),this.axios.interceptors.response.use(e=>e,e=>{if(e.response){const t=e.response.status;401===t?console.error("ðŸ”’ Token invalide ou expirÃ©"):403===t?console.error("ðŸš« AccÃ¨s refusÃ©"):404===t?console.error("ðŸ” Endpoint non trouvÃ©"):t>=500&&console.error("ðŸ”¥ Erreur serveur")}return Promise.reject(e)})}async request(e,t={}){try{const i={action:e,...t},o=await this.axios.post(this.baseURL,i);return o.data}catch(i){if(i.request)throw new Error("Erreur de connexion au serveur PrestaShop");throw i}}async searchProducts(e,t=50,i=null){return this.request("searchProducts",{query:e,limit:t,category:i})}async getProductDetails(e){return this.request("getProductDetails",{productId:e})}async getCopieurs(){return this.request("getCopieurs")}async getCopieur(e){return this.useMockData?new Promise(e=>{setTimeout(()=>{e({success:!0,data:v})},500)}):this.request("getCopieur",{id:e})}async createCopieur(e){return this.request("createCopieur",e)}async updateCopieur(e,t){return this.request("updateCopieur",{id:e,...t})}async deleteCopieur(e){return this.request("deleteCopieur",{id:e})}async addCopieurToCatalogue(e){return this.request("addCopieurToCatalogue",{id:e})}async duplicateCopieur(e){const t={...e,Copieur:{...e.Copieur,nom_copieur:`${e.Copieur.nom_copieur} (Copie)`,titre_copieur:`${e.Copieur.titre_copieur} (Copie)`}};return delete t.id,this.createCopieur(t)}exportCopieur(e){const t={Copieur:e.Copieur,exported_at:(new Date).toISOString(),version:"1.0"};return JSON.stringify(t,null,2)}async deleteOption(e){return"string"===typeof e&&e.startsWith("temp_")?{success:!0,message:"Option temporaire ignorÃ©e."}:this.request("deleteOption",{idOption:e})}async deleteProduct(e){return"string"===typeof e&&e.startsWith("temp_")?{success:!0,message:"Produit temporaire ignorÃ©."}:this.request("deleteProduct",{idProductCopieur:e})}async deleteRule(e){return"string"===typeof e&&e.startsWith("temp_")?{success:!0,message:"RÃ¨gle temporaire ignorÃ©e."}:this.request("deleteRule",{idRule:e})}async importCopieur(e){const t=JSON.parse(e);if(!t.Copieur)throw new Error('Format JSON invalide: propriÃ©tÃ© "Copieur" manquante');return this.createCopieur(t)}async testConnection(){return this.request("testConnection")}}var C=new y;o.Ay.use(s.Ay);const w=e=>(e.price||0)+(e.variation_price||0),I=e=>e.map(e=>`${e.id_product_attribute}:${e.qty}`).sort().join("|");var P=new s.Ay.Store({state:{currentCopieur:null,currentConfiguration:[],configurationSignature:"",loading:!1,error:null,customizationInput:"",totalPrice:0,currentImages:null,currentProductWithDetails:null,selectedQuantities:{}},mutations:{SET_LOADING(e,t){e.loading=t},SET_ERROR(e,t){e.error=t},SET_CURRENT_COPIEUR(e,t){e.currentCopieur=t},SET_USER_SELECTION(e,t){e.currentConfiguration=t},SET_SELECTION_FINGERPRINT(e,t){e.configurationSignature=t},SET_TOTAL_PRICE(e,t){e.totalPrice=t},SYNC_WITH_PRESTASHOP_FORM(e,t){const i=JSON.stringify({components:t,timestamp:Date.now(),signature:I(t)}),o=document.getElementById("customization-copieur-input");o&&(o.value=i),e.customizationInput=i},CLEAR_ERROR(e){e.error=null},SET_IMAGES(e,t){console.warn("SET IMAGES mutation called with images:",t),e.currentImages=t},SET_PRODUCT_WITH_DETAILS(e,{product:t}){e.currentProductWithDetails=t},SET_SELECTED_QUANTITIES(e,t){e.selectedQuantities=t}},getters:{isLoading:e=>e.loading,hasError:e=>!!e.error,currentCopieurData:e=>e.currentCopieur?.Copieur||null,getProductById:e=>t=>e.currentCopieur?.Copieur?.produits?.find(e=>e.id_product_copieur===t),getOptionById:e=>t=>e.currentCopieur?.Copieur?.options?.find(e=>e.id===t),getProductName:(e,t)=>e=>{const i=t.getProductById(e);return i?.name||"Produit inconnu"},getProductPrice:(e,t)=>e=>{const i=t.getProductById(e);return i?w(i):0},getConfigurationDetails:(e,t)=>{if(!e.currentConfiguration?.length||!t.currentCopieurData)return{totalItems:0,totalPrice:0,products:[]};const i=e.currentConfiguration.map(e=>{const i=t.getProductById(e.id_product_copieur);return{...e,productDetails:i,totalPrice:(e.price||0)*(e.qty||1)}});return{totalItems:e.currentConfiguration.reduce((e,t)=>e+(t.qty||1),0),totalPrice:i.reduce((e,t)=>e+t.totalPrice,0),products:i}},isProductDisabled:e=>t=>e.currentCopieur?.disabledProducts?.includes(t),isProductExcluded:e=>t=>e.currentCopieur?.excludedProducts?.includes(t),isProductRequired:e=>t=>e.currentCopieur?.requiredProducts?.includes(t),getProductRuleMessages:e=>t=>{const i=e.currentCopieur?.Copieur?.produits?.find(e=>e.id_product_copieur===t);return i&&i.rules?.map(e=>({id:e.id,type:e.type,text:e.message}))||[]}},actions:{async loadCopieur({commit:e},t){try{e("SET_LOADING",!0),e("CLEAR_ERROR");const i=await C.getCopieur(t);if(!(i&&i.success&&i.data))throw new Error("DonnÃ©es copieur invalides");e("SET_CURRENT_COPIEUR",i.data)}catch(i){e("SET_ERROR","Impossible de charger le configurateur")}finally{e("SET_LOADING",!1)}},setDefaultConfigurationFromCopieur({commit:e,state:t,getters:i}){if(!t.currentCopieur?.Copieur)return;const o=t.currentCopieur.Copieur,r=o.configurations?.find(e=>e.is_default);if(r&&r.products){const t=r.products.map(e=>({id:e.id_product_copieur,id_product_attribute:e.id_product_attribute_prestashop,qty:e.quantity||1,name:i.getProductName(e.id_product_copieur),price:i.getProductPrice(e.id_product_copieur)}));e("SET_USER_SELECTION",t)}else{const t=[];o.options?.forEach(e=>{if(!e.choix_multiple&&!e.affiche_aucun_produit){const i=o.produits?.find(t=>t.id_copieur_option===e.id);i&&t.push({id:i.id_product_prestashop,id_product_attribute:i.id_product_attribute_prestashop||0,qty:i.qte_min||1,name:i.name,price:i.price})}}),e("SET_USER_SELECTION",t)}},updateConfiguration({commit:e},t){const i=I(t);e("SET_USER_SELECTION",t),e("SET_SELECTION_FINGERPRINT",i),e("SYNC_WITH_PRESTASHOP_FORM",t)},updateImages({commit:e},t){e("SET_IMAGES",t)},updateProductWithDetails({commit:e},t){e("SET_PRODUCT_WITH_DETAILS",{product:t})},updateTotalPrice({commit:e},t){e("SET_TOTAL_PRICE",t)},updateSelectedQuantities({commit:e},t){e("SET_SELECTED_QUANTITIES",t)}}}),k=function(){var e=this,t=e._self._c;return t("div",{staticClass:"product-showcase"},[t("div",{staticClass:"main-image"},[e.currentImages&&e.currentImages.url?t("img",{staticClass:"showcase-img",attrs:{src:e.currentImages.url,alt:e.currentImages.alt||"Image configuration"}}):t("div",{staticClass:"placeholder-showcase"},[t("div",{staticClass:"placeholder-img"},[t("svg",{staticClass:"placeholder-icon feather feather-image",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[t("rect",{attrs:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}}),t("circle",{attrs:{cx:"8.5",cy:"8.5",r:"1.5"}}),t("polyline",{attrs:{points:"21 15 16 10 5 21"}})]),t("span",[e._v("Aucune image")])])])]),t("div",{staticClass:"configuration-summary"},[t("h3",[e._v("Configuration actuelle")]),t("div",{staticClass:"selected-products"},e._l(e.currentProductWithDetails,function(i){return t("div",{key:i.id_product_copieur,staticClass:"selected-product",class:{disabled:e.checkIfProductIsDisabled(i.id_product_copieur),excluded:e.checkIfProductIsExcluded(i.id_product_copieur),required:e.checkIfProductIsRequired(i.id_product_copieur)}},[e._e(),t("img",{staticClass:"product-thumb",attrs:{src:i.image_url||"https://images.pexels.com/photos/163064/play-stone-network-networked-interactive-163064.jpeg?auto=compress&cs=tinysrgb&w=100",alt:i.name}}),t("div",{staticClass:"product-details"},[t("span",{staticClass:"product-name"},[e._v(e._s(i.name))]),t("span",{staticClass:"product-mobile"},[e._v(e._s(i.reference))]),t("div",{staticClass:"flex gap-2"},[t("span",{staticClass:"product-price text-orange-price"},[e._v(e._s(e.formatPriceToEuro(i.price+i.variation_price))+" (HT)")]),t("span",{staticClass:"product-price text-gray-700"},[e._v(e._s(e.formatPriceTTC(i.price+i.variation_price))+" (TTC)")])]),e.selectedQuantities[i.id_product_copieur]>1?t("span",{staticClass:"quantity"},[e._v(" QtÃ©: "+e._s(e.selectedQuantities[i.id_product_copieur])+" ")]):e._e(),e.getProductRuleMessages(i.id_product_copieur).length>0?t("div",{staticClass:"rule-messages"},e._l(e.getProductRuleMessages(i.id_product_copieur),function(i){return t("div",{key:i.id,class:["rule-message",i.type]},["warning"===i.type?t("alert-triangle-icon",{staticClass:"message-icon"}):e._e(),"error"===i.type?t("x-circle-icon",{staticClass:"message-icon"}):e._e(),"info"===i.type?t("info-icon",{staticClass:"message-icon"}):e._e(),t("span",{staticClass:"message-text"},[e._v(e._s(i.text))])],1)}),0):e._e()])])}),0),t("div",{staticClass:"price-summary"},[t("div",{staticClass:"total-price flex-row"},[t("span",{staticClass:"price-label font-bold"},[e._v("Prix total:")]),t("div",{staticClass:"flex gap-2"},[t("span",{staticClass:"product-price text-orange-price"},[e._v(e._s(e.formatPriceToEuro(e.calculateTotalPrice()))+" (HT)")]),t("span",{staticClass:"product-price text-gray-700"},[e._v(e._s(e.formatPriceToEuro(e.calculateTotalPriceHT()))+" (TTC)")])])])])])])},E=[],T={name:"CopieurImage",computed:{...(0,s.aH)(["currentImages","currentProductWithDetails","totalPrice","selectedQuantities"])},methods:{formatPriceToEuro(e){const t=e/1.2;return new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(t)},formatPriceTTC(e){return new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(e)},checkIfProductIsDisabled(e){return this.$store.getters.isProductDisabled(e)},checkIfProductIsExcluded(e){return this.$store.getters.isProductExcluded(e)},checkIfProductIsRequired(e){return this.$store.getters.isProductRequired(e)},getProductRuleMessages(e){return this.$store.getters.getProductRuleMessages(e)},calculateTotalPrice(){return this.totalPrice},calculateTotalPriceHT(){return this.totalPrice/1.2}}},q=T,S=(i(6531),(0,l.A)(q,k,E,!1,null,"63075e8a",null)),A=S.exports;window.JCA_COPIEURS_CONFIG||(window.JCA_COPIEURS_CONFIG={apiBaseUrl:null,token:"dev-token"}),document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("vue-product-copieur-front"),t=document.getElementById("copieur-js-vue-image");if(e){const t=e?.dataset.copieurId||"26",i=e?.dataset.productId||null,r=document.getElementById("add-to-cart-or-refresh");if(r&&!document.getElementById("customization-copieur-input")){const e=document.createElement("input");e.type="hidden",e.name="customization_copieur",e.id="customization-copieur-input",e.value="",r.appendChild(e)}new o.Ay({store:P,render:e=>e(x,{props:{copieurId:parseInt(t),productId:i?parseInt(i):null}})}).$mount("#vue-product-copieur-front")}if(t){const e=t?.dataset.copieurId||"26";new o.Ay({store:P,render:t=>t(A,{props:{copieurId:parseInt(e)}})}).$mount("#copieur-js-vue-image")}if(!e&&!t){const e=document.getElementById("app");e&&new o.Ay({store:P,render:e=>e(x,{props:{copieurId:26,productId:null}})}).$mount("#app")}})}},t={};function i(o){var r=t[o];if(void 0!==r)return r.exports;var a=t[o]={id:o,exports:{}};return e[o].call(a.exports,a,a.exports,i),a.exports}i.m=e,function(){var e=[];i.O=function(t,o,r,a){if(!o){var s=1/0;for(u=0;u<e.length;u++){o=e[u][0],r=e[u][1],a=e[u][2];for(var d=!0,n=0;n<o.length;n++)(!1&a||s>=a)&&Object.keys(i.O).every(function(e){return i.O[e](o[n])})?o.splice(n--,1):(d=!1,a<s&&(s=a));if(d){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[o,r,a]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var o in t)i.o(t,o)&&!i.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};i.O.j=function(t){return 0===e[t]};var t=function(t,o){var r,a,s=o[0],d=o[1],n=o[2],c=0;if(s.some(function(t){return 0!==e[t]})){for(r in d)i.o(d,r)&&(i.m[r]=d[r]);if(n)var u=n(i)}for(t&&t(o);c<s.length;c++)a=s[c],i.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return i.O(u)},o=self["webpackChunkvue_dev"]=self["webpackChunkvue_dev"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=i.O(void 0,[504],function(){return i(9539)});o=i.O(o)})();